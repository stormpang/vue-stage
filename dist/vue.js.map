{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observe/array.js","../src/scheduler.js","../src/observe/watcher.js","../src/observe/dep.js","../src/observe/index.js","../src/state.js","../src/compiler/parser.js","../src/compiler/generate.js","../src/compiler/index.js","../src/vnode/index.js","../src/vnode/patch.js","../src/lifeCycle.js","../src/init.js","../src/render.js","../src/global-api/index.js","../src/index.js"],"sourcesContent":["export function isFunction(val) {\n  return typeof val == 'function'\n}\n\nexport function isObject(val) {\n  return typeof val == 'object' && val !== null;\n}\n\n\nlet callbacks = [];\nlet waiting = false;\n\nfunction flushCallbacks() {\n  callbacks.forEach(fn => fn()); // 按照顺序清空nextTick\n  callbacks = [];\n  waiting = false;\n}\n\nexport function nextTick(fn) { // vue3 里面的nextTick 就是promise ， vue2里面做了一些兼容性处理\n  callbacks.push(fn);\n  if (!waiting) {\n    Promise.resolve().then(flushCallbacks);\n    waiting = true\n  }\n}\n\n\nexport let isArray = Array.isArray\n\n// {a:1} {b:1,a:2}  => {b:1,a:[1,2]}\n\n// {}  {beforeCreate:fn}  => {beforecreatre:[fn]}\n// {beforecreatre:[fn]} {beforeCreate:fn}  => {beforecreatre:[fn,fn]}\n\nlet strats = {}; // 存放所有策略\n\nlet lifeCycle = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted'\n];\nlifeCycle.forEach(hook => {\n  strats[hook] = function (parentVal, childVal) {\n    if (childVal) {\n      if (parentVal) { // 父 子 都有值 用父和子拼接在一起， 父有值就一定是数组\n        return parentVal.concat(childVal)\n      } else { // 儿子有值 父亲没有值\n        if (isArray(childVal)) {\n          return childVal\n        }\n        return [childVal] // 如果没值 就会变成数组\n      }\n    } else {\n      return parentVal;\n    }\n  }\n});\n\nstrats.components = function (parentVal, childVal) {\n  // childVal.__proto__ = parentVal\n  const res = Object.create(parentVal) // 合并后生成一个新对象 不用原来的\n  if (childVal) {\n    for (let key in childVal) {\n      res[key] = childVal[key]\n    }\n  }\n  return res\n}\n\nexport function mergeOptions(parentVal, childVal) {\n  const options = {}\n  for (let key in parentVal) {\n    mergeFiled(key);\n  }\n  for (let key in childVal) {\n    if (!parentVal.hasOwnProperty(key)) {\n      mergeFiled(key);\n    }\n  }\n\n  function mergeFiled(key) {\n    // 设计模式 策略模式\n    let strat = strats[key];\n    if (strat) {\n      options[key] = strat(parentVal[key], childVal[key]); // 合并两个值\n    } else {\n      options[key] = childVal[key] || parentVal[key];\n    }\n  }\n\n  return options;\n}\n\nfunction makeMap(str) {\n  let tagList = str.split(',');\n  return function (tagName) {\n    return tagList.includes(tagName)\n  }\n}\n\nexport const isReservedTag = makeMap(\n  'template,script,style,element,content,slot,link,meta,svg,view,button,' +\n  'a,div,img,image,text,span,input,switch,textarea,spinner,select,' +\n  'slider,slider-neighbor,indicator,canvas,' +\n  'list,cell,header,loading,loading-indicator,refresh,scrollable,scroller,' +\n  'video,web,embed,tabbar,tabheader,datepicker,timepicker,marquee,countdown'\n)\n","let oldArrayPrototype = Array.prototype // 获取数组的老的原型方法\n\nexport let arrayMethods = Object.create(oldArrayPrototype) // 让arrayMethods通过__proto__能获取到数组的方法\n// arrayMethods.__proto__ = oldArrayPrototype\n// arrayMethods.push = function\n\nlet methods = [ // 只有这7个方法 可以导致数组发生变化\n  'push',\n  'shift',\n  'pop',\n  'unshift',\n  'reverse',\n  'sort',\n  'splice'\n]\n\nmethods.forEach(method => {\n  arrayMethods[method] = function (...args) {\n    // 数组新增的属性要看一下是不是对象 如果是对象 继续进行劫持\n    // 需要调用数组原生逻辑\n    oldArrayPrototype[method].call(this, ...args)\n    // todo... 可以添加自己逻辑 函数劫持 切片\n    let inserted = null\n    const ob = this.__ob__\n    switch (method) {\n      case 'splice': // 修改 删除 添加\n        inserted = args.slice(2) // splice从第三个参数起 是增添的新数据\n      case 'push':\n      case 'unshift':\n        inserted = args // 调用push和unshift 传递的参数就是新增的逻辑\n        break\n    }\n    // inserted 遍历数组 看一下它是否需要进行劫持\n    if (inserted) {\n      ob.observeArray(inserted)\n    }\n    ob.dep.notify() // 触发页面更新流程\n  }\n})\n\n// 属性的查找：是先找自己身上的，找不到去原型上查找\n","import {nextTick} from \"./utils\";\n\nlet queue = []; // 这里存放要更新的watcher\nlet has = {}; // 用来存储已有的watcher的id\n\nfunction flushSchedulerQueue() {\n  // beforeUpdate\n  queue.forEach(watcher => watcher.run());\n  queue = []; // 这里存放要更新的watcher\n  has = {};\n  pending = false\n}\n\nlet pending = false;\n\nexport function queueWatcher(watcher) { // watcher1 watcher1 watcher1 watcher1  watcher2\n                                        // 一般情况下 写去重 可以采用这种方式 ，如果你不使用set的时候\n  let id = watcher.id\n  if (has[id] == null) {\n    has[id] = true;\n    queue.push(watcher); // [watcher1,watcher2]\n    if (!pending) { // 防抖 多次执行 只走1次\n      nextTick(flushSchedulerQueue)\n      pending = true\n    }\n  }\n}\n","import Dep from \"./dep\";\nimport {queueWatcher} from \"../scheduler\";\n\nlet id = 0\n\nclass Watcher {\n  constructor(vm, fn, cb, options) { // 要将dep放到watcher中\n    this.vm = vm\n    this.fn = fn\n    this.cb = cb\n    this.options = options\n    this.id = id++\n    this.depsId = new Set()\n    this.deps = []\n    this.getter = fn // fn就是页面渲染逻辑\n    this.get() // 标识上来后就做一次初始化\n  }\n\n  addDep(dep) {\n    const id = dep.id\n    if (!this.depsId.has(id)) {\n      this.depsId.add(id)\n      this.deps.push(dep) // 做了保存id的功能 并且让watcher记住dep\n      dep.addSub(this)\n    }\n  }\n\n  get() {\n    Dep.target = this // window.target = watcher\n    this.getter() // 页面渲染逻辑 _update(_render()) vm.name / vm.age\n    Dep.target = null // 渲染完毕后 就将标识清空了 只有在渲染的时候才会进行依赖收集\n  }\n\n  update() { // 每次更新数据都会同步调用这个update方法 我可以将更新的逻辑缓存起来 等会同步更新数据的逻辑执行完毕后 依次调用（去重的逻辑）\n    console.log('缓存更新')\n    queueWatcher(this)\n    // 可以做异步更新处理\n    // this.get() // vue.nextTick [fn1,fn2,fn3]\n  }\n\n  run() {\n    console.log('真正执行更新')\n    this.get()\n  }\n}\n\nexport default Watcher\n","import watcher from \"./watcher\";\n\nlet id = 0\n\nclass Dep {\n  constructor() { // 要把watcher放到dep中\n    this.subs = []\n    this.id = id++\n  }\n\n  depend() {\n    // this.subs.push(Dep.target) // 让dep记住这个watcher,watcher还要记住dep 相互的关系\n    Dep.target.addDep(this) // 在watcher中在调用dep的addSub方法\n  }\n\n  addSub(watcher) {\n    this.subs.push(watcher) // 让dep记住watcher\n  }\n\n  notify() {\n    this.subs.forEach(watcher => watcher.update())\n  }\n}\n\nDep.target = null // 这里我用了一个全局的变量 window.target 静态属性\n\nexport default Dep\n","import {isArray, isObject} from \"../utils\";\nimport {arrayMethods} from \"./array\";\nimport Dep from \"./dep\"\n\n// 1.每个对象都有一个__proto__属性 它指向所属类的原型 fn.__proto__ = Function.prototype\n// 2.每个原型上都有一个constructor属性 指向函数本身 Function.prototype.constructor = Function\nclass Observer {\n  constructor(value) {\n    // 不让__ob__被遍历到\n    // value.__ob__ = this // 我给对象和数组添加一个自定义属性\n    // 如果给一个对象增添一个不存在的属性 我希望也能更新视图\n    this.dep = new Dep() // 给对象和数组都增加dep属性 {}.__ob__.dep  [].__ob__.dep\n    Object.defineProperty(value, '__ob__', {\n      value: this,\n      enumerable: false // 表示这个属性不能被列举出来 不能被循环到\n    })\n    if (isArray(value)) {\n      // 更改数组原型方法，如果是数组 我就改写数组的原型链\n      value.__proto__ = arrayMethods\n      this.observeArray(value)\n\n      // 数组 如何依赖收集 而且更新的时候 如何触发更新？\n    } else {\n      this.walk(value) // 核心就是循环对象\n    }\n  }\n\n  observeArray(data) { // 递归遍历数组，对数组内部的对象再次进行重写\n    data.forEach(item => {\n      observe(item) // 数组里面如果是引用类型 那么是响应式的\n    })\n  }\n\n  walk(data) {\n    Object.keys(data).forEach(key => { // 要使用defineProperty重新定义\n      defineReactive(data, key, data[key])\n    })\n  }\n}\n\nfunction dependArray(value) {\n  for (let i = 0; i < value.length; i++) {\n    const current = value[i]\n    current.__ob__ && current.__ob__.dep.depend()\n    if (Array.isArray(current)) {\n      dependArray(current)\n    }\n  }\n}\n\n// vue2应用了defineProperty需要一加载的时候 就进行递归操作 所以耗性能 如果层次过深也会浪费性能\n// 1.性能优化的原则:\n// 1）不要把所有的数据都放到data中 因为所有的数据都会增加get和set\n// 2）不要写数据的时候 层次过深 尽量扁平化数据\n// 3）不要频繁获取数据\n// 4）如果数据不需要响应式 可以使用Object.freeze 冻结属性\nfunction defineReactive(obj, key, value) { // vue2慢的原因 主要在这个方法中\n  const childOb = observe(value) // 递归进行观测数据 不管有多少层 我都进行defineProperty\n  // childOb 如果有值 那么就是数组或对象\n  const dep = new Dep() // 每个属性都增加了一个dep\n  Object.defineProperty(obj, key, {\n    get() { // 后续会有很多逻辑\n      if (Dep.target) {\n        dep.depend()\n        if (childOb) {\n          childOb.dep.depend() // 取属性的时候 会对对应的值（对象本身和数组）进行依赖收集\n          if (Array.isArray(value)) {\n            // 可能是数组套数组\n            dependArray(value)\n          }\n        }\n      }\n      return value; // 闭包，次此value 会像上层的value进行查找\n    },\n    set(newValue) {  // 如果设置的是一个对象那么会再次进行劫持\n      if (newValue === value) return\n      observe(newValue)\n      value = newValue\n      dep.notify() // 拿到当前的dep里面的watcher依次执行\n    }\n  })\n}\n\nexport function observe(value) {\n  // 1.如果value不是对象 那么就不用观测了 说明写的有问题\n  if (!isObject(value)) {\n    return\n  }\n\n  if (value.__ob__) {\n    return // 一个对象不需要重新被观测\n  }\n\n  // 需要对对象进行观测（最外层必须是一个{} 不能是数组）\n  // 如果一个数据已经被观测过了 就不要在进行观测了 用类来实现 我管测过就增加一个标识 说明观测过了 在观测的时候可以先检测是否观测过 如果观测过了就跳过\n  return new Observer(value)\n}\n\n// 1.默认vue在初始化的时候 会对对象每一个属性都进行劫持 增加dep属性 当取值的时候会做依赖收集\n// 2.默认还会对属性值（对象和数组的本身进行增加dep属性）进行依赖收集\n// 3.如果是属性变化 触发属性对应的dep去更新\n// 4.如果是数组更新 触发数组的本身dep进行更新\n// 5.如果取值的时候是数组还要让数组中的对象类型也进行依赖收集（递归依赖收集）\n// 6.如果数组里面放对象 默认对象里的属性实惠进行依赖收集的 因为在取值时 会进行JSON.stringify操作\n","import {isFunction} from \"./utils\";\nimport {observe} from \"./observe\";\n\nexport function initState(vm) {\n  const opts = vm.$options\n\n  if (opts.data) {\n    initData(vm)\n  }\n}\n\nfunction proxy(vm, key, source) { // 取值的时候做代理 不是暴力的把_data属性赋予给vm 而且直接赋值会有命名冲突问题\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key]\n    },\n    set(newValue) {\n      vm[source][key] = newValue\n    }\n  })\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data // 用户传入的数据\n\n  // 如果用户传递的是一个函数 则取函数的返回值作为对象 如果就是对象那就直接使用这个对象\n  // 只有根实例可以是一个对象\n  data = vm._data = isFunction(data) ? data.call(vm) : data\n\n  // 需要将data变成响应式的 Object.defineProperty 重写data中的所有属性\n  observe(data) // 观测数据\n\n  for (let key in data) { // vm.message => vm._data.message\n    proxy(vm, key, '_data')\n  }\n}\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 匹配标签名的  aa-xxx\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  aa:aa-xxx\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); //  此正则可以匹配到标签名 匹配到结果的第一个(索引第一个) [1]\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>  [1]\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\n\n// [1]属性的key   [3] || [4] ||[5] 属性的值  a=1  a='1'  a=\"\"\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的  />    >\n\nexport function parserHTML(html) {\n  // 可以不停的截取模版，直到把模版全部解析完毕\n\n  // 我要构建父子关系\n  let stack = []\n  let root = null\n\n  function createASTElement(tag, attrs, parent) {\n    return {\n      tag,\n      type: 1, // 元素\n      children: [],\n      parent,\n      attrs\n    }\n  }\n\n  function start(tag, attrs) {\n    // 遇到开始标签 就取栈中最后一个作为父节点\n    let parent = stack[stack.length - 1]\n    let element = createASTElement(tag, attrs, parent)\n    if (root == null) { // 说明当前节点是根节点\n      root = element\n    }\n    if (parent) {\n      element.parent = parent// 更新p的parent属性 指向parent\n      parent.children.push(element)\n    }\n    stack.push(element)\n  }\n\n  function end(tagName) {\n    let endTag = stack.pop()\n    if (endTag.tag !== tagName) {\n      console.log('标签出错')\n    }\n  }\n\n  function text(chars) {\n    let parent = stack[stack.length - 1]\n    chars = chars.replace(/\\s/g, '')\n    if (chars) {\n      parent.children.push({\n        type: 2,\n        text: chars\n      })\n    }\n  }\n\n  function advance(len) {\n    html = html.substring(len)\n  }\n\n  function parseStartTag() {\n    const start = html.match(startTagOpen)\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: []\n      }\n      advance(start[0].length)\n\n      let end\n      let attr\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) { // 要有属性并且不能为开始的结束标签\n        match.attrs.push({name: attr[1], value: attr[3] || attr[4] || attr[5]})\n        advance(attr[0].length)\n      }\n      if (end) {\n        advance(end[0].length)\n      }\n      return match\n    }\n    return false\n  }\n\n  while (html) {\n    // 解析标签和文本\n    const index = html.indexOf('<')\n    if (index === 0) {\n      // 解析开始标签 并且把属性也解析出来\n      const startTagMatch = parseStartTag()\n      if (startTagMatch) { // 开始标签\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue\n      }\n      let endTagMatch\n      if (endTagMatch = html.match(endTag)) { // 结束标签\n        end(endTagMatch[1])\n        advance(endTagMatch[0].length)\n        continue\n      }\n      break\n    }\n\n    // 文本\n    if (index > 0) {\n      const chars = html.substring(0, index)\n      text(chars)\n      advance(chars.length)\n    }\n  }\n\n  return root\n}\n","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}\n\nfunction genProps(attrs) {\n  // {key:value,key:value,}\n  let str = '';\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i];\n    if (attr.name === 'style') { // {name:id,value:'app'}\n      let styles = {}\n      attr.value.replace(/([^;:]+):([^;:]+)/g, function () {\n        styles[arguments[1]] = arguments[2];\n      })\n      attr.value = styles\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\n  }\n  return `{${str.slice(0, -1)}}`\n}\n\nfunction gen(el) {\n  if (el.type == 1) {\n    return generate(el); // 如果是元素就递归的生成\n  } else {\n    let text = el.text; // {{}}\n    if (!defaultTagRE.test(text)) return `_v('${text}')`; // 说明就是普通文本\n\n    // 说明有表达式 我需要 做一个表达式和普通值的拼接 ['aaaa',_s(name),'bbb'].join('+)\n    // _v('aaaa'+_s(name) + 'bbb')\n    let lastIndex = defaultTagRE.lastIndex = 0;\n    let tokens = []; // <div> aaa{{bbb}} aaa </div>\n    let match;\n\n    // ，每次匹配的时候 lastIndex 会自动向后移动\n    while (match = defaultTagRE.exec(text)) { // 如果正则 + g 配合exec 就会有一个问题 lastIndex的问题\n      let index = match.index;\n      if (index > lastIndex) {\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)));\n      }\n      tokens.push(`_s(${match[1].trim()})`);\n      lastIndex = index + match[0].length;\n    }\n    if (lastIndex < text.length) {\n      tokens.push(JSON.stringify(text.slice(lastIndex)));\n    }\n    return `_v(${tokens.join('+')})`; // webpack 源码 css-loader  图片处理\n  }\n}\n\nfunction genChildren(el) {\n  let children = el.children;\n  if (children) {\n    return children.map(item => gen(item)).join(',')\n  }\n  return false;\n}\n\n// _c(div,{},c1,c2,c3,c4)\nexport function generate(ast) {\n  let children = genChildren(ast)\n  let code = `_c('${ast.tag}',${\n    ast.attrs.length ? genProps(ast.attrs) : 'undefined'\n  }${\n    children ? `,${children}` : ''\n  })`\n  return code;\n}\n","import {parserHTML} from \"./parser\";\nimport {generate} from \"./generate\";\n\nexport function compileToFunction(template) {\n  // 1.将模版变成ast语法树\n  let ast = parserHTML(template)\n\n  // 2.代码优化 标记静态节点\n\n  // 3.代码生成\n  const code = generate(ast) // 模版引擎的实现原理 都是 new Function + with ejs jade handlerbar\n  const render = new Function(`with(this){return ${code}}`)\n  return render\n}\n\n// 1.编译原理\n// 2.响应式原理 依赖收集\n// 3.组件化开发（贯穿了vue的流程）\n// 4.diff算法\n","import Vue from \"..\";\nimport {isObject, isReservedTag} from \"../utils\"\n\n\nfunction createComponent(vm, tag, data, children, key, Ctor) {\n  if (isObject(Ctor)) { // 组件的定义一定是通过Vue.extend 进行包裹的\n    Ctor = vm.$options._base.extend(Ctor)\n  }\n  data.hook = {\n    // 组件的生命周期\n    init(vnode) {  // vnode.componentInstance.$el -> 对应组件渲染完毕后的结果\n      let child = vnode.componentInstance = new Ctor({}); //我想获取组件的真实dom\n      child.$mount(); // 所以组件在走挂载的流程时 vm.$el 为null\n\n      // mount挂载完毕后 会产生一个真实节点，这个节点在 vm.$el上-》 对应的就是组件的真实内容\n\n    },\n    prepatch() {\n\n    },\n    postpatch() {\n\n    }\n    ///\n  }\n  // 每个组件 默认的名字内部会给你拼接一下  vue-component-1-my-button\n  let componentVnode = vnode(vm, tag, data, undefined, key, undefined, {Ctor, children, tag});// componentOptions 存放了一个重要的属性交Ctor 构造函数\n  return componentVnode\n}\n\nexport function createElement(vm, tag, data = {}, ...children) { // 返回虚拟节点 _c('',{}....)\n\n  // 如果区分是组件还是元素节点？\n  if (!isReservedTag(tag)) {\n    let Ctor = vm.$options.components[tag]; // 组件的初始化 就是new 组件的构造函数\n    return createComponent(vm, tag, data, children, data.key, Ctor);\n  }\n\n  return vnode(vm, tag, data, children, data.key, undefined)\n}\n\nexport function createText(vm, text) { // 返回虚拟节点\n  return vnode(vm, undefined, undefined, undefined, undefined, text)\n}\n\n// 看两个节点是不是相同节点，就看是不是 tag 和 key都一样\n// vue2 就有一个性能问题 ， 递归比对\nexport function isSameVnode(newVnode, oldVnode) {\n  return (newVnode.tag === oldVnode.tag) && (newVnode.key == oldVnode.key)\n}\n\nfunction vnode(vm, tag, data, children, key, text, options) {\n  return {\n    vm,\n    tag,\n    data,\n    children,\n    key,\n    text,\n    componentOptions: options\n  }\n}\n","import {isSameVnode} from \".\";\n\nexport function patch(oldVnode, vnode) {\n\n  if (!oldVnode) { // 组件的挂载流程\n    return createElm(vnode); // 产生一个组件的真实节点\n  }\n\n  const isRealElement = oldVnode.nodeType\n\n  if (isRealElement) {\n    // 删除老节点 根据vnode创建新节点，替换掉老节点\n    const elm = createElm(vnode);\n    const parentNode = oldVnode.parentNode;\n    parentNode.insertBefore(elm, oldVnode.nextSibling);\n    parentNode.removeChild(oldVnode);\n    return elm; // 返回最新节点\n  } else { // 不管怎么diff 最终想更新渲染 =》 dom操作里去\n\n    // 只比较同级，如果不一样，儿子就不用比对了， 根据当前节点，创建儿子 全部替换掉\n    // diff 算法如何实现？\n    if (!isSameVnode(oldVnode, vnode)) { // 如果新旧节点 不是同一个，删除老的换成新的\n      return oldVnode.el.parentNode.replaceChild(createElm(vnode), oldVnode.el)\n    }\n\n    // 文本直接更新即可，因为文本没有儿子\n    let el = vnode.el = oldVnode.el; // 复用节点\n    if (!oldVnode.tag) { // 文本了, 一个是文本 那么另一个一定也是文本\n      if (oldVnode.text !== vnode.text) {\n        return el.textContent = vnode.text\n      }\n    }\n    // 元素  新的虚拟节点\n    updateProperties(vnode, oldVnode.data);\n    // 是相同节点了，复用节点，在更新不一样的地方 （属性）\n\n    // 比较儿子节点\n    let oldChildren = oldVnode.children || [];\n    let newChildren = vnode.children || [];\n\n    // 情况1 ：老的有儿子 ， 新没儿子\n\n    if (oldChildren.length > 0 && newChildren.length == 0) {\n      el.innerHTML = '';\n      // 新的有儿子 老的没儿子 直接将新的插入即可\n    } else if (newChildren.length > 0 && oldChildren.length == 0) {\n      newChildren.forEach(child => el.appendChild(createElm(child)))\n    } else {\n      // 新老都有儿子\n      updateChildren(el, oldChildren, newChildren);\n    }\n    return el\n  }\n}\n\nfunction updateChildren(el, oldChildren, newChildren) {\n  // vue2中 如何做的diff算法\n\n  // vue内部做了优化 （能尽量提升性能，如果实在不行，在暴力比对）\n  // 1.在列表中新增和删除的情况\n\n  let oldStartIndex = 0;\n  let oldStartVnode = oldChildren[0];\n  let oldEndIndex = oldChildren.length - 1;\n  let oldEndVnode = oldChildren[oldEndIndex];\n\n\n  let newStartIndex = 0;\n  let newStartVnode = newChildren[0];\n  let newEndIndex = newChildren.length - 1;\n  let newEndVnode = newChildren[newEndIndex];\n\n  function makeKeyByIndex(children) {\n    let map = {}\n    children.forEach((item, index) => {\n      map[item.key] = index;\n    })\n    return map;\n  }\n\n  let mapping = makeKeyByIndex(oldChildren)\n\n  // diff算法的复杂度 是O(n)  比对的时候 指针交叉的时候 就是比对完成了\n  while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\n    if (!oldStartVnode) { // 在指针移动的时候 可能元素已经被移动走了，那就跳过这一项\n      oldStartVnode = oldChildren[++oldStartIndex]\n    } else if (!oldEndVnode) {\n      oldEndVnode = oldChildren[--oldEndIndex]\n    } else if (isSameVnode(oldStartVnode, newStartVnode)) { // 头头比较\n      patch(oldStartVnode, newStartVnode); // 会递归比较子节点，同时比对这两个人的差异\n      oldStartVnode = oldChildren[++oldStartIndex];\n      newStartVnode = newChildren[++newStartIndex];\n    } else if (isSameVnode(oldEndVnode, newEndVnode)) { // 尾尾比较\n      patch(oldEndVnode, newEndVnode);\n      oldEndVnode = oldChildren[--oldEndIndex];\n      newEndVnode = newChildren[--newEndIndex];\n    } else if (isSameVnode(oldStartVnode, newEndVnode)) { // 头尾\n      patch(oldStartVnode, newEndVnode);\n      el.insertBefore(oldStartVnode.el, oldEndVnode.el.nextSibling)\n      oldStartVnode = oldChildren[++oldStartIndex];\n      newEndVnode = newChildren[--newEndIndex];\n    } else if (isSameVnode(oldEndVnode, newStartVnode)) { // 尾头\n      patch(oldEndVnode, newStartVnode);\n      el.insertBefore(oldEndVnode.el, oldStartVnode.el);// 将尾部的插入到头部去\n      oldEndVnode = oldChildren[--oldEndIndex];\n      newStartVnode = newChildren[++newStartIndex];\n    } else {\n      // 之前的逻辑都是考虑 用户一些特殊情况，但是有非特殊的，乱序排\n      let moveIndex = mapping[newStartVnode.key];\n      if (moveIndex == undefined) {\n        // 没有直接将节点插入到开头的前面\n        el.insertBefore(createElm(newStartVnode), oldStartVnode.el)\n      } else {\n        // 有的话需要复用\n        let moveVnode = oldChildren[moveIndex]; // 找到复用的那个人，将他移动到前面去\n        patch(moveVnode, newStartVnode);\n        el.insertBefore(moveVnode.el, oldStartVnode.el);\n        oldChildren[moveIndex] = undefined; // 将移动的节点标记为空\n      }\n      newStartVnode = newChildren[++newStartIndex]\n    }\n  }\n  if (newStartIndex <= newEndIndex) { // 新的多，那么就将多的插入进去即可\n    // 如果下一个是null 就是appendChild\n    let anchor = newChildren[newEndIndex + 1] == null ? null : newChildren[newEndIndex + 1].el; // 参照物是固定的\n    for (let i = newStartIndex; i <= newEndIndex; i++) {\n      // 看一下 当前尾节点的下一个元素是否存在，如果存在则是插入到下一个元素的前面\n      // 这里可能是向前追加 可能是像后追加\n      el.insertBefore(createElm(newChildren[i]), anchor)\n    }\n  }\n  if (oldStartIndex <= oldEndIndex) {// 老的多余的  ,需要清理掉，直接删除即可\n    for (let i = oldStartIndex; i <= oldEndIndex; i++) {\n      let child = oldChildren[i]; // 因为child可能是undefined 所有要跳过空间点\n      child && el.removeChild(child.el);\n    }\n  }\n}\n\nfunction createComponent(vnode) { // 给组件预留了 一个初始化流程 init\n  let i = vnode.data;\n  if ((i = i.hook) && (i = i.init)) {\n    i(vnode)\n  }\n  if (vnode.componentInstance) { // 说明是组件\n    return true;\n  }\n}\n\nexport function createElm(vnode) {\n  let {tag, data, children, text, vm} = vnode;\n  if (typeof tag === 'string') {\n    if (createComponent(vnode)) { // 返回一个组件的真实节点\n      return vnode.componentInstance.$el; // 对应的就是真实节点\n    }\n\n    vnode.el = document.createElement(tag); // 先创建id app\n    updateProperties(vnode);\n    children.forEach(child => { // 再去查找id app的儿子，对儿子进行创建 {tag:'组件',componentOptions}\n      vnode.el.appendChild(createElm(child)); // createElm(child) 有创建组件和元素的功能\n    })\n  } else {\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el\n}\n\nfunction updateProperties(vnode, oldProps = {}) {\n  // 这里的逻辑 可能是初次渲染，初次渲染 直接 用oldProps 给vnode的el赋值即可\n  // 更新逻辑 拿到老的props 和 vnode里面的data进行比对\n  let el = vnode.el; // dom真实的节点\n  let newProps = vnode.data || {};\n  // 新旧比对， 两个对象如何比对差异？\n  let newStyle = newProps.style || {};\n  let oldStyle = oldProps.style || {};\n\n  for (let key in oldStyle) { // 老的样式有 新的没有，就把页面上的样式删除掉\n    if (!newStyle[key]) {\n      el.style[key] = '';\n    }\n  }\n  for (let key in newProps) { //  直接用新的改掉老的就可以了\n    // 如果前后一样，浏览器会去检测\n    if (key == 'style') {\n      for (let key in newStyle) { // {style:{color:red}}\n        el.style[key] = newStyle[key]\n      }\n    } else {\n      el.setAttribute(key, newProps[key]);\n    }\n  }\n  for (let key in oldProps) {\n    if (!newProps[key]) {\n      el.removeAttribute(key);\n    }\n  }\n}\n","import {patch} from \"./vnode/patch\";\nimport Watcher from \"./observe/watcher\";\n\nexport function mountComponent(vm) {\n  // 初始化流程\n  const updateComponent = () => {\n    vm._update(vm._render()) // render() _c _v _s\n  }\n  // 每个组件都有一个watcher 我们把这个watcher称之为渲染watcher\n  callHook(vm, 'beforeCreate')\n  new Watcher(vm, updateComponent, () => {\n    console.log('后续增添更新钩子函数 update')\n    callHook(vm, 'created');\n  }, true)\n  callHook(vm, 'mounted')\n}\n\nexport function lifeCycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n    // 采用的是 先序深度遍历 创建节点（遇到节点就创造节点 递归创建）\n    const vm = this\n    const preVnode = vm._prevVnode\n    // 第一次渲染 是根据虚拟节点 生成真实节点 替换掉原来的节点\n    vm._prevVnode = vnode\n    // 如果是第二次 生成一个新的虚拟节点 和老的虚拟节点进行对比\n    if (!preVnode) { // 没有节点就是初次渲染\n      vm.$el = patch(vm.$el, vnode)\n    } else {\n      vm.$el = patch(preVnode, vnode)\n    }\n  }\n}\n\nexport function callHook(vm, hook) {\n  const handlers = vm.$options[hook]\n  handlers && handlers.forEach(item => {\n    item.call(vm) // 生命周期的this永远指向实例\n  })\n}\n","import {initState} from \"./state\";\nimport {compileToFunction} from \"./compiler\";\nimport {mountComponent} from \"./lifeCycle\";\nimport {mergeOptions, nextTick} from \"./utils\";\n\nexport function initMixin(Vue) {\n  // 后续组件化开发的时候 Vue.extend 可以创造一个子组件 子组件可以继承Vue 子组件也可以调用_init方法\n  Vue.prototype._init = function (options) {\n    const vm = this\n\n    // 把用户的选项放到vue上，这样在其他地方中都可以获取到options了\n    // 因为全局定义的内容 回魂合在当前的实例上\n    vm.$options = mergeOptions(vm.constructor.options, options) // 为了后续扩展的方法都可以获取$options选项\n\n    // options中用户传入的数据 el data\n    initState(vm)\n\n    if (vm.$options.el) {\n      // 要将数据挂再到页面上\n\n      // 现在数据已经被劫持了,数据变化需要更新视图 diff算法更新需要更新的部分\n      // vue -> template(写起来更符合直觉) -> jax(灵活)\n      // vue3 template 写起来性能会更高一些 内部做了很多优化\n\n      // template -> ast语法树(用来描述语法本身) -> 描述成一个树结构 -> 将代码重组成js语法\n      // 模版编译原理(把template模版编译成render函数 -> 虚拟DOM -> diff算法比对虚拟DOM)\n\n      // ast -> render返回 -> vnode -> 生成真实DOM\n      // 更新的时候再次调用render -> 新的vnode -> 新旧比对 -> 更新真实DOM\n\n      vm.$mount(vm.$options.el)\n    }\n  }\n\n  // new Vue({el}) new Vue().$mount\n  Vue.prototype.$mount = function (el) {\n    const vm = this\n    const opts = vm.$options\n    el = document.querySelector(el) // 获取真实的元素\n    vm.$el = el // 页面真实元素\n\n    if (!opts.render) {\n      // 模版编译\n      let template = opts.template\n      if (!template) {\n        template = el.outerHTML\n      }\n      const render = compileToFunction(template)\n      opts.render = render\n    }\n\n    // 这里已经获取到了一个render函数 这个函数他的返回值 _c('div',{id:'app'},_c('span',undefined,'hello'))\n    mountComponent(vm)\n  }\n\n  Vue.prototype.$nextTick = nextTick\n}\n","import {isObject} from \"./utils\";\nimport {createElement, createText} from \"./vnode\";\n\nexport function renderMixin(Vue) {\n  Vue.prototype._c = function () { // createElement 创建元素型的节点\n    const vm = this;\n    return createElement(vm, ...arguments)\n  }\n  Vue.prototype._v = function (text) { // 创建文本的虚拟节点\n    const vm = this;\n    return createText(vm, text); // 描述虚拟节点是属于哪个实例的\n  }\n  Vue.prototype._s = function (val) { // JSON.stingfiy()\n    if (isObject(val)) return JSON.stringify(val);\n    return val;\n  }\n  Vue.prototype._render = function () {\n    const vm = this // vm中有所有的数据 vm.xxx => xm._data.xxx\n    let {render} = vm.$options\n    let vnode = render.call(vm)\n    return vnode\n  }\n}\n","import {isObject, mergeOptions} from \"../utils\";\n\nexport function initGlobalAPI(Vue) {\n\n  Vue.options = {}; // 全局属性 , 在每个组件初始化的时候 将这些属性放到每个组件上\n  Vue.mixin = function (options) {\n    // Vue.options = 合并后的结果\n    this.options = mergeOptions(this.options, options);\n    return this;\n  }\n  // Vue.component -> Vue.extend\n\n  Vue.options._base = Vue;\n  // 等会我通过Vue.extend 方法可以产生一个子类，new 子类的时候会执行代码初始化流程 (组件的初始化)\n  Vue.extend = function (opt) { // 会产生一个子类  data\n    const Super = this;\n    const Sub = function (options) { // 创造一个组件 其实就是 new 这个组件的类 （组件的初始化）\n      this._init(options)\n    }\n    //  Object.create  Object.setPrototypeOf()\n    // Sub.prototype.__proto__ = Super.prototype\n    // function create(parentProtptype){\n    //     const Fn = function(){}\n    //     Fn.prototype = parentProtptype\n    //     return new Fn;\n    // }\n    Sub.prototype = Object.create(Super.prototype); // 继承原型方法\n    Sub.prototype.constructor = Sub; // Object.create 会产生一个新的实例作为 子类的原型，此时constructor 会指向错误\n    Sub.options = mergeOptions(Super.options, opt); // 需要让子类 能拿到 我们Vue定义的全局组件\n\n    return Sub;\n  }\n\n  Vue.options.components = {}; // 存放全局组件的\n  Vue.component = function (id, definition) { // definition 可以传入对象或者函数\n    let name = definition.name || id;\n    definition.name = name;\n    if (isObject(definition)) {\n      definition = Vue.extend(definition)\n    }\n    Vue.options.components[name] = definition; // 维护关系\n  }\n\n}\n","import {initMixin} from './init'\nimport {renderMixin} from \"./render\";\nimport {lifeCycleMixin} from \"./lifeCycle\";\nimport {initGlobalAPI} from \"./global-api\";\nimport {compileToFunction} from \"./compiler\";\nimport {createElm, patch} from \"./vnode/patch\";\n\n// vue要如何实现 原型模式 所有的功能都通过原型扩展的方式来添加\nfunction Vue(options) {\n  this._init(options) // 实现vue的初始化功能\n}\n\ninitMixin(Vue)\nrenderMixin(Vue)\nlifeCycleMixin(Vue)\n\ninitGlobalAPI(Vue)\n\n// 先生成一个虚拟节点\n// let vm = new Vue({\n//   data() {\n//     return {name: 'jw'}\n//   }\n// })\n// let render = compileToFunction((`<div>\n//   <li key=\"A\" style=\"color: red\">A</li>\n//   <li key=\"B\" style=\"color: blue\">B</li>\n//   <li key=\"C\" style=\"color: green\">C</li>\n//   <li key=\"D\" style=\"color: grey\">D</li>\n// </div>`))\n// let oldVnode = render.call(vm)\n// let el = createElm(oldVnode)\n// document.body.appendChild(el)\n//\n// // 再生成一个新的虚拟节点 patch\n// const vm2 = new Vue({\n//   data() {\n//     return {name: 'zf'}\n//   }\n// })\n// const render2 = compileToFunction(`<div>\n//   <li key=\"F\" style=\"color: red\">F</li>\n//   <li key=\"B\" style=\"color: blue\">B</li>\n//   <li key=\"A\" style=\"color: red\">A</li>\n//   <li key=\"E\" style=\"color: green\">E</li>\n//   <li key=\"P\" style=\"color: grey\">P</li>\n// </div>`)\n// const newVnode = render2.call(vm2)\n// setTimeout(() => {\n//   patch(oldVnode, newVnode) // 比对两个虚拟节点的差异 更新需要更新的地方\n// }, 2000)\n\n// 导出Vue给别人使用\nexport default Vue\n\n// 1.new Vue 会调用_init方法进行初始化操作\n// 2.会将用户的选项放到 vm._options 上\n// 3.会对当前属性上搜索有没有data数据 initState\n// 4.有data判断data是不是一个函数 如果是函数取返回值 initData\n// 5.observe去观测data中的数据 和vm没关系 说明data已经变成了响应式\n// 6.vm上想取值也能渠道data中的数据 vm._data = data 这样用户能取到data了 vm._data\n// 7.用户觉得有点麻烦 vm.xxx => vm._data\n// 8.如果更新对象不存在的属性 会导致视图不更新 如果是数组更新索引和长度不会触发更新\n// 9.如果是替换成一个新对象 新对象会被进行劫持 如果数组存放新内容push unshift 新增的内容也会被劫持 通过__ob__进行表示这个对象被监控过（在vue中被监控的对象都有一个__ob__这个属性）\n// 10. 如果你就想改索引 可以使用$set方法 内部就是splice\n\n// 只有根组件的情况：每个属性都有一个dep\n// 1.vue里面用到了观察者模是，默认组件选人的时候，会创建一个watcher（并且会渲染视频）\n// 2.当渲染视图的时候，会取data的数据，会走每个属性的get方法，就让这个属性的dep记录watcher\n// 3. 同时让watcher也记住dep（这个逻辑目前没用到）dep和watcher是多对多的关系，因为一个属性可能对应多个视图，一个视图对应多个数据\n// 4.如果数据发生变化，会通知对应属性的dep，依次通知存放的watcher去更新\n\n// 1.Vue.component 注册成全局组件 内部会自动调用Vue.extend方法 返回组件的构造函数\n// 2.组件初始化的时候 会做一个合并mergeOptions（自己的组件.__proto__ = 全局的组件）\n// 3.内部会对模版进行编译操作 _c('组件的名字')做筛查如果是组件就创造一个组件的虚拟节点 还会判断Ctor 如果对象会调用Vue.extend 所有的组件通过Vue.extend方法来实现的（componentOptions 里面放着组件的所有内容 属性的实现 事件的实现 插槽内容 Ctor）\n// 4. 创建组件的真实节点（new Ctor 拿到组件的实例 并且调用组件的$mount方法 会生成一个$el对应组件模版渲染后的结果）vnode.componentInstance = new Ctor() vnode.componentInstance.$el => 组件渲染后结果\n// 5. 将组件的vnode.componentInstance.$el 插入到父标签中\n// 6. 组件在 new Ctor() 时 会进行组件的初始化 给组件再次添加一个独立的渲染watcher（每个组件都有自己的watcher）更新时 只需要更新自己组件对应的渲染watcher（因为组件渲染时 组件对应的属性回收机自己的渲染watcher）\n"],"names":["isFunction","val","isObject","callbacks","waiting","flushCallbacks","forEach","fn","nextTick","push","Promise","resolve","then","isArray","Array","strats","lifeCycle","hook","parentVal","childVal","concat","components","res","Object","create","key","mergeOptions","options","mergeFiled","hasOwnProperty","strat","makeMap","str","tagList","split","tagName","includes","isReservedTag","oldArrayPrototype","prototype","arrayMethods","methods","method","args","call","inserted","ob","__ob__","slice","observeArray","dep","notify","queue","has","flushSchedulerQueue","watcher","run","pending","queueWatcher","id","Watcher","constructor","vm","cb","depsId","Set","deps","getter","get","addDep","add","addSub","Dep","target","update","console","log","subs","depend","Observer","value","defineProperty","enumerable","__proto__","walk","data","item","observe","keys","defineReactive","dependArray","i","length","current","obj","childOb","set","newValue","initState","opts","$options","initData","proxy","source","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parserHTML","html","stack","root","createASTElement","tag","attrs","parent","type","children","start","element","end","pop","text","chars","replace","advance","len","substring","parseStartTag","match","attr","name","index","indexOf","startTagMatch","endTagMatch","defaultTagRE","genProps","styles","arguments","JSON","stringify","gen","el","generate","test","lastIndex","tokens","exec","trim","join","genChildren","map","ast","code","compileToFunction","template","render","Function","createComponent","Ctor","_base","extend","init","vnode","child","componentInstance","$mount","prepatch","postpatch","componentVnode","undefined","createElement","createText","isSameVnode","newVnode","oldVnode","componentOptions","patch","createElm","isRealElement","nodeType","elm","parentNode","insertBefore","nextSibling","removeChild","replaceChild","textContent","updateProperties","oldChildren","newChildren","innerHTML","appendChild","updateChildren","oldStartIndex","oldStartVnode","oldEndIndex","oldEndVnode","newStartIndex","newStartVnode","newEndIndex","newEndVnode","makeKeyByIndex","mapping","moveIndex","moveVnode","anchor","$el","document","createTextNode","oldProps","newProps","newStyle","style","oldStyle","setAttribute","removeAttribute","mountComponent","updateComponent","_update","_render","callHook","lifeCycleMixin","Vue","preVnode","_prevVnode","handlers","initMixin","_init","querySelector","outerHTML","$nextTick","renderMixin","_c","_v","_s","initGlobalAPI","mixin","opt","Super","Sub","component","definition"],"mappings":"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"}